# Рейтинги ISO

## О проекте

РНПЦ Дарын [декларирует](https://daryn.kz/о-центре/), что «в рейтинге международного олимпийского движения на международных предметных олимпиадах (IMO, IPHO, ICHO, IBO, IOI) в 2017 году Казахстан занял 10-ю позицию среди 123 стран-участниц».

Этим проектом мы предлагаем проверить фактическую точность такого утверждения.

## Результаты

### Рейтинг по сумме баллов

Командный рейтинг на олимпиадах по химии (IChO), информатике (IOI), математике (IMO) и биологии (IBO), посчитанный на основании суммы баллов набранных всеми участниками от каждой страны. Чем больше баллов набрали участники -- тем выше позиция страны в рейтинге. Синяя кривая - позиция Казахстана, черная кривая - общее количество стран-участниц.

![Зачет по баллам с аннотациями](/exports/svg/total-score-absolute.svg)

Сравнение результатов Казахстана (синяя кривая) с результатами России (красная кривая) и Узбекистана (зеленая кривая). Общее количество стран-участниц -- черная кривая.

![Зачет по баллам](/exports/svg/total-score-compare.svg)

### Рейтинг по положению в абсолютном рейтинге

![Зачет по месту с аннотациями](/exports/svg/total-position-absolute.svg)
![Зачет по месту](/exports/svg/total-position-compare.svg)

### Рейтинг по медалям (олимпийский зачет)

Командный рейтинг посчитанный по системе спортивных олимпиад: сортировка по количеству золотых медалей, затем по количеству серебряных и потом по количеству бронзовых. Такая методика подсчета может приводить к высоким позициям, но она манипулятивна -- за объяснениями смотрите следующую картинку.

![Зачет по медалям с аннотациями](/exports/svg/total-medals-absolute.svg)
![Зачет по медалям](/exports/svg/total-medals-compare.svg)

На данных графиках показывается проблема с подсчетом командного рейтинга на основании медалей. Красная кривая показывает позицию Казахстана. Если вы хотите ввести вашего читателя в заблуждение, вы будете сравнивать позицию на красной кривой с общим количеством стран-участниц (высота сиреневого столбца). Однако, из-за того, что на предметных олимпиадах (в отличие от спортивных) количество золотых, серебряных и бронзовых медалей не равно единице (золотые медали могут получать от 20 до 40 человек), может быть несколько стран с одинаковым количеством/качеством медалей. И поэтому Казахстан может занять 9 место на IChO в 2021 году (красная кривая), но при этом на 1-8 местах может быть еще 20 стран (высота фиолетового столбца) из 79 стран (высота сиреневого столбца). А различных комбинаций количества/качеств медалей, иными словами "мест" в рейтинге может быть всего 20 (синяя кривая).

![Cтатистика медального зачета](/exports/svg/total-medal-stats.svg)

## Как добавить новый предмет?

В первую очередь надо написать парсер, обозвать его названием предмета и положить в папку `parsers`. В этом файле должна быть функция `export_ratings_based_on_score` которая принимает в качестве аргумента итерируемый объект (tuple/list), в котором каждый элемент это двухбуквенное обозначение страны (расшифровка есть в файле `helpers/country_codes.py`) и возвращает словарь (dict) в котором каждый ключ (это год в формате str) соотносится с другим словарем, где двухбуквенные обозначения стран соотносятся с местом страны в том году. Отдельно есть ключ `'total'`, который указывает общее кол-во стран-участниц.

### Какие функции должны быть в парсере?

- `export_ratings_based_on_score`
- `export_ratings_based_on_medals`
- `export_ratings_based_on_position`

## To-do

- [ ] Добавить результаты IGeO
- [x] Добавить результаты IBO
- [x] Добавить результаты IPhO
- [ ] Добавить результаты Менделеевской олимпиады
- [ ] Добавить создание рейтинга по количеству медалей
  - [x] обновить парсер по математике
  - [x] обновить парсер по химии
  - [x] обновить парсер по физике
  - [x] обновить парсер по информатике
  - [ ] обновить парсер по географии
  - [x] обновить парсер по биологии
- [ ] Добавить создание рейтинга по сумме мест в абсолютном рейтинге
  - [x] обновить парсер по математике
  - [x] обновить парсер по химии
  - [x] обновить парсер по физике
  - [x] обновить парсер по информатике
  - [ ] обновить парсер по географии
  - [x] обновить парсер по биологии
- [x] Добавить создание единого графика, который сочетает все предметы

## Known issues

Результаты IPhO некоторых годов (2016-2020) указаны только для медалистов и обладателей ПГ. За счет этого подсчет рейтинга по позициям может быть не самым справедливым.
